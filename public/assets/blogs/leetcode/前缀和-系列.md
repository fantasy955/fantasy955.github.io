## 1124. 表现良好的最长时间段

[1124. 表现良好的最长时间段 - 力扣（Leetcode）](https://leetcode.cn/problems/longest-well-performing-interval/description/)

```js
var longestWPI = function(hours) {
    const n = hours.length;
    const s = new Array(n + 1).fill(0);
    const stk = [0];
    for (let i = 1; i <= n; i++) {
        s[i] = s[i - 1] + (hours[i - 1] > 8 ? 1 : -1);
        if (s[stk[stk.length - 1]] > s[i]) {
            stk.push(i);
        }
    }
    console.log(s);
    console.log(Array.from(stk))

    let res = 0;
    // r是结束位置
    // 栈内是候选左端点（新的起点，当前缀后在减小时，应该取新的起点）
    for (let r = n; r >= 1; r--) {
        // s[stk[stk.length - 1]] < s[r]: 保证s[r] - s[stk.top()] > 0
        while (stk.length && s[stk[stk.length - 1]] < s[r]) {
            res = Math.max(res, r - stk.pop());
            console.log('res', res);
        }
    }
    return res;
};

```

