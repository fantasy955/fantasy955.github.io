## :zap:网络

#### 减少HTTP请求

如Chrome浏览器最多同时允许对同一个域名Host建立6个TCP连接，不同的浏览器有所区别，**减少http请求也就是减少我们html里css/js等资源的数量**

#### 使用HTTP2.0

如Chrome浏览器最多同时允许对同一个域名Host建立6个TCP连接，不同的浏览器有所区别，减少http请求也就是减少我们html里css/js等资源的数量

#### 浏览器缓存

`manifest`

#### 白屏时间做加载动画

增强用户体验

## :zap:资源

#### 静态资源cdn

静态css/js/img等资源可以做cdn缓存，这样把资源同步到全国全球各地，用户就能更快访问到

#### 静态资源单独域名

1. 浏览器请求并发限制（同一域名（包括二级域名）在同一时间支持的并发请求数量的限制）
2. cookie传输，单独域名，不会携带cookie
3. 方便分流和缓存（动静分离，有利于静态资源做cdn缓存）

#### gzip压缩

使资源体积更小
服务端配置，如nginx可配置支持gzip压缩资源传输的方式
如果浏览器支持gzip解析，服务器就会推送gzip的资源，在http的相应头里可以看到显示Content-Encoding:gzip

#### 服务端渲染

使用Vue或React这类组件框架，一般来说，DOM元素是运行时被解析和生成的，而这部分在客户端浏览器进行，如果组件数量过多，会消耗比较多的时间用于生成，用户需要等待很久的加载时间。

服务端渲染则是将DOM元素生成放在服务端进行，意外着用户可以更快地看到部分界面，剩余的界面由服务端解析完成后传递给浏览器。前端还需要进行事件添加。

#### 将CSS放在文件头部，JavaScript文件放在底部

单线程js可能会阻滞文档加载



## :zap:图片

#### 字体图标代替图片图标

小于10k的图片可以打包为base64格式

#### 精灵图

一些带有企业特色的小图标，如淘宝购物车，笑脸娃娃，可以使用精灵图，**让一张图上带有多个小图，然后使用css背景定位来显示出合适的位子**，能大大减少请求

#### 懒加载

很常见的优化方式。既可以节省流量，也可以加快页面的呈现速度。

#### 预加载

可以在window.onload之后请求一些其他地方需要的图片资源
比如我们有一个活动页使用了高清图，我们可以在它的**入口前的首页就加载它**，当我们进去页面时，浏览器就会从缓存里读取这张图片。

**实现方式**：

- css

  1. **创建用来预加载的标签**

  2. 给标签使用背景图，背景图的路径是需要预加载的图片资源。并且将图片移到看不见的地方，或缩小到看不见。**不能用 display=none , 否则预加载会失效**
  3. 当使用到已经预加载好的图片时，会直接使用缓存好的图片资源，而不需要向服务器发送请求。

- JavaScript

  1. 将需要预加载的图片资源的 URL 保存在数组里

  2. 循环遍历 URL 数组执行以下步骤，直到结束

  3. **创建一个 image 对象 `new Image()`**

  4. 将 image 对象的 src 属性的值指定为预加载图片的 URL

#### 使用png格式的图片

PNG 格式是WEB 图像中最通用的格式，它是一种无损**压缩格式**

#### 小于10k的图片可以打包为base64格式

可以使用webpack url-loader处理

## :zap:代码

#### 慎用全局变量

1. 全局变量定义在全局执行上下文，是所有作用域链的顶端。局部找不到就会一直往上找，影响性能（在使用时声明）
2. 全局执行上下文一直存在于上下文执行栈，直到程序退出，不利于GC回收
3. 命名污染

 #### 缓存全局变量

将使用中无法避免的全局变量缓存到局部

#### 减少重绘回流

回流：当元素的规模尺寸，布局，隐藏等改变的时候，render dom需要重新构建，这就称为回流
重绘：元素只更新外观，风格，而不会影响布局的，叫重绘

#### 节流、防抖

#### 少用闭包、减少内存泄漏

#### 减少数据读取次数

```js
let arr = [1,2,3]
for (var i = 0; i < arr.length; i++) {
  console.log(arr[i])
}
// 优化
for (var i = 0, len = arr.length; i < len; i++) {
  console.log(arr[i])
}

```

#### 文档碎片优化节点添加

dom：document.createDocumentFragment()

#### 减少判断层级

减少if else，提前return if不满足的逻辑

#### 字面量与构造式

数组、对象、字符串等，直接声明比new 更快

## :zap:Webpack

#### 减小代码体积

#### 按需加载

#### 提取第三库代码

#### webpack dll优化

### 参考资料

.....................................................................................

- [对前端性能优化的一些小看法 - 掘金 (juejin.cn)](https://juejin.cn/post/7101249167183822878)

- [web前端性能优化（全汇总） - 掘金 (juejin.cn)](https://juejin.cn/post/7029973323475845150)